!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function i(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,t.isPlainObject(n)&&n),this.multiple=!1,this.init()}var e=(window.location,"qor.i18n.inline"),n="click."+e,s="change."+e;i.prototype={contructor:i,init:function(){this.$element;this.makeInputEditable(),this.bind()},bind:function(){this.$element.on(n,t.proxy(this.click,this)).on(s,t.proxy(this.change,this))},unbind:function(){this.$element.off(n,this.click).off(s,this.change)},makeInputEditable:function(){t.fn.editable.defaults.mode="popup",t.fn.editable.defaults.ajaxOptions={type:"POST"},t(".qor-i18n-inline").editable({pk:1,params:function(i){return i.Value=i.value,i.Locale=t(this).data("locale"),i.Key=t(this).data("key"),i},url:"/admin/translations"})}},i.DEFAULTS={},i.plugin=function(n){return this.each(function(){var s,a=t(this),o=a.data(e);o||a.data(e,o=new i(this,n)),"string"==typeof n&&t.isFunction(s=o[n])&&s.apply(o)})},t(function(){i.plugin.call(t(".qor-i18n-inline"))})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function i(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,t.isPlainObject(n)&&n),this.multiple=!1,this.init()}function e(i){var e=[];return t.isPlainObject(i)&&t.each(i,function(t,i){e.push([t,i].join("="))}),e.join("&")}function n(i){var e={};return i&&(i=i.replace("?","").split("&"),t.each(i,function(t,i){i=i.split("="),t=i[0],e[t]=i[1]})),e}var s=window.location,a="qor.i18n",o="click."+a,l="change."+a,r="input";i.prototype={contructor:i,init:function(){var t=this.$element;this.$languages=t.find(".qor-js-language"),this.$items=t.find(".i18n-list > li"),this.bind()},bind:function(){this.$element.on(o,t.proxy(this.click,this)).on(l,t.proxy(this.change,this)),this.$languages.on(l,t.proxy(this.reload,this))},unbind:function(){this.$element.off(o,this.click).off(l,this.change),this.$languages.off(l,this.reload)},click:function(i){var e,n,s=t(i.target),o=this.$items;if(s.is("button")||(n=s.closest("button")),n&&1===n.size()?s=n:(e=s.closest(".i18n-list-item"),e.hasClass("active highlight")||(s=e)),s.length)switch(String(s.data("toggle")).replace("."+a,"")){case"bulk":this.multiple=!0,s.addClass("hidden").siblings("button").removeClass("hidden"),o.addClass("active highlight").find(".qor-js-translator").trigger(r);break;case"exit":this.multiple=!1,s.addClass("hidden"),s.siblings("button").addClass("hidden").filter(".qor-js-bulk").removeClass("hidden"),o.removeClass("active highlight");break;case"edit":o.removeClass("active highlight"),s.closest("li").addClass("active highlight").find(".qor-js-translator").trigger(r);break;case"save":e=s.closest("li"),this.submit(e.find("form"),function(){e.removeClass("active highlight")});break;case"cancel":s.closest("li").removeClass("active highlight");break;case"copy":e=s.closest("li"),e.find(".qor-js-translator").val(e.find(".qor-js-translation-source").text()).trigger(r);break;case"copyall":o.find(".qor-js-copy").click()}},change:function(i){var e=t(i.target);e.is(".qor-js-translator")&&(this.multiple&&this.submit(e.closest("form"),function(t){var i=t.find(".qor-js-help");i.addClass("in"),setTimeout(function(){i.removeClass("in")},3e3)}),e.trigger(r))},reload:function(i){var a=t(i.target),o=n(s.search);o[a.attr("name")]=a.val(),s.search=e(o)},submit:function(i,e){i.is("form")&&t.ajax(s.pathname,{method:"POST",data:i.serialize(),success:function(){i.siblings(".qor-js-translation-target").text(i.find(".qor-js-translator").val()),t.isFunction(e)&&e(i)}})},destroy:function(){this.unbind(),this.$element.removeData(a)}},i.DEFAULTS={},i.plugin=function(e){return this.each(function(){var n,s=t(this),o=s.data(a);o||s.data(a,o=new i(this,e)),"string"==typeof e&&t.isFunction(n=o[e])&&n.apply(o)})},t(function(){i.plugin.call(t(".qor-i18n"))})});